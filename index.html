<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gerador de Holerite Profissional</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1250/1250628.png" />
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(180deg, #e6f0ff, #f7f9fb);
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 850px;
      background: white;
      margin: 40px auto;
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #003366;
    }
    label {
      font-weight: bold;
      margin-top: 12px;
      display: block;
    }
    input {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 5px;
      font-size: 15px;
    }
    button {
      margin-top: 25px;
      width: 100%;
      background: #004999;
      color: white;
      border: none;
      padding: 14px;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #003366;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ’¼ Gerador de Holerite Profissional</h1>
    <form id="formHolerite">
      <label>Nome do FuncionÃ¡rio</label>
      <input type="text" id="nome" required />

      <label>MÃªs/Ano de ReferÃªncia (ex: 12/2025)</label>
      <input type="text" id="mesAno" required />

      <label>SalÃ¡rio Base (R$)</label>
      <input type="number" id="salario" step="0.01" required />

      <label>Dias Trabalhados</label>
      <input type="number" id="diasTrabalhados" required />

      <label>Horas Trabalhadas</label>
      <input type="number" id="horasTrabalhadas" required />

      <label>Dias Ãšteis do MÃªs</label>
      <input type="number" id="diasUteis" required />

      <label>Horas Adicional Noturno (20%)</label>
      <input type="number" id="horasNoturnas" required />

      <label>Horas Extra 50%</label>
      <input type="number" id="horas50" required />

      <label>Horas Extra 100%</label>
      <input type="number" id="horas100" required />

      <label>Dias D.S.R</label>
      <input type="number" id="dsr" required />

      <label>Domingos/Feriados Trabalhados</label>
      <input type="number" id="feriados" required />

      <label>Dias VT</label>
      <input type="number" id="diasVT" required />

      <label>Valor da Passagem (ida + volta)</label>
      <input type="number" id="valorPassagem" step="0.01" required />

      <button type="button" onclick="gerarPDF()">Gerar Holerite</button>
    </form>
  </div>

  <script>
    function formatarValor(valor) {
      return "R$ " + valor.toFixed(2).replace(".", ",");
    }

    function calcularINSS(salario) {
      if (salario <= 1518.00) return salario * 0.075;
      else if (salario <= 2793.88)
        return 1518.00 * 0.075 + (salario - 1518.00) * 0.09;
      else
        return 1518.00 * 0.075 + (2793.88 - 1518.00) * 0.09 + (salario - 2793.88) * 0.12;
    }

    function gerarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const nome = document.getElementById("nome").value.trim();
      const mesAno = document.getElementById("mesAno").value.trim().replace("/", "-");
      const salario = parseFloat(document.getElementById("salario").value);
      const diasTrabalhados = parseInt(document.getElementById("diasTrabalhados").value);
      const horasTrabalhadas = parseFloat(document.getElementById("horasTrabalhadas").value);
      const diasUteis = parseInt(document.getElementById("diasUteis").value);
      const horasNoturnas = parseFloat(document.getElementById("horasNoturnas").value);
      const horas50 = parseFloat(document.getElementById("horas50").value);
      const horas100 = parseFloat(document.getElementById("horas100").value);
      const dsr = parseInt(document.getElementById("dsr").value);
      const feriados = parseInt(document.getElementById("feriados").value);
      const diasVT = parseInt(document.getElementById("diasVT").value);
      const valorPassagem = parseFloat(document.getElementById("valorPassagem").value);

      const vdt = salario / 30;
      const vhn = vdt / horasTrabalhadas;

      const adicionalNoturno = (vhn * 0.2) * horasNoturnas;
      const extra50 = vhn * horas50 * 1.5;
      const extra100 = vhn * horas100 * 2;
      const dsrValor = (extra50 + extra100 + adicionalNoturno) / diasUteis * dsr;
      const feriadoValor = feriados * 101.20;
      const vt = diasVT * valorPassagem;
      const inss = calcularINSS(salario);
      const descontoVT = salario * 0.06;

      const salarioBase = vdt * diasTrabalhados;
      const totalProventos = salarioBase + dsrValor + adicionalNoturno + extra50 + extra100 + feriadoValor + vt;
      const totalDescontos = inss + descontoVT;
      const totalLiquido = totalProventos - totalDescontos;

      // CabeÃ§alho
      doc.setFont("helvetica", "bold");
      doc.setFontSize(16);
      doc.setTextColor(0, 51, 102);
      doc.text("Holerite de Pagamento", 105, 20, null, null, "center");
      doc.setFontSize(12);
      doc.setTextColor(0, 0, 0);
      doc.text(`FuncionÃ¡rio: ${nome}`, 15, 35);
      doc.text(`MÃªs/Ano: ${mesAno.replace("-", "/")}`, 15, 43);

      // Linha decorativa
      doc.setDrawColor(0, 51, 102);
      doc.setLineWidth(0.5);
      doc.line(15, 48, 195, 48);

      // CabeÃ§alho tabela
      let y = 58;
      doc.setFontSize(11);
      doc.setFillColor(220, 230, 255);
      doc.rect(15, y - 6, 180, 8, "F");
      doc.text("DescriÃ§Ã£o", 20, y);
      doc.text("ReferÃªncia", 100, y);
      doc.text("Valor (R$)", 165, y);

      // Dados
      y += 6;
      const linhas = [
        ["SalÃ¡rio Base (011)", diasTrabalhados, salarioBase],
        ["Descanso Semanal (049)", dsr, dsrValor],
        ["Adicional Noturno (050)", horasNoturnas, adicionalNoturno],
        ["Hora Extra 50% (060)", horas50, extra50],
        ["Hora Extra 100% (061)", horas100, extra100],
        ["Domingo/Feriado (062)", feriados, feriadoValor],
        ["Vale Transporte (320)", "6%", vt],
      ];

      doc.setFont("helvetica", "normal");
      linhas.forEach(([desc, ref, val]) => {
        y += 8;
        doc.text(desc, 20, y);
        doc.text(String(ref), 105, y);
        doc.text(formatarValor(val), 160, y);
      });

      // Totais
      y += 12;
      doc.setFont("helvetica", "bold");
      doc.text(`Total de Proventos: ${formatarValor(totalProventos)}`, 20, y);
      y += 8;
      doc.text(`Desconto INSS (310): ${formatarValor(inss)}`, 20, y);
      y += 6;
      doc.text(`Desconto Vale Transporte (320): ${formatarValor(descontoVT)}`, 20, y);
      y += 8;
      doc.text(`Total de Descontos: ${formatarValor(totalDescontos)}`, 20, y);
      y += 10;

      // Total LÃ­quido
      doc.setFontSize(13);
      doc.setFillColor(240, 240, 240);
      doc.rect(15, y - 6, 180, 10, "F");
      doc.setTextColor(0, 51, 102);
      doc.text(`ðŸ’° Total LÃ­quido a Receber: ${formatarValor(totalLiquido)}`, 20, y);

      const nomeArquivo = `${nome.replace(/\\s/g, '_')}_holerite_${mesAno}.pdf`;
      doc.save(nomeArquivo);
    }
  </script>
</body>
</html>
