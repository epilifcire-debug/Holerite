<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Holerite Automático</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
  background: #f9f9f9;
}
h1 {
  text-align: center;
}
.container {
  max-width: 800px;
  margin: 0 auto;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
label { font-weight: bold; }
input {
  padding: 6px;
  width: 100%;
  margin: 4px 0 10px 0;
  border-radius: 8px;
  border: 1px solid #aaa;
}
button {
  background: #0066cc;
  color: white;
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  cursor: pointer;
}
button:hover { background: #004999; }
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}
th, td {
  border: 1px solid #000;
  padding: 6px;
  font-size: 14px;
}
th {
  background: #f0f0f0;
}
.provento {
  text-align: right;
}
.desconto {
  text-align: right;
  color: #b30000;
  font-weight: bold;
}
.totais td {
  font-weight: bold;
}
.linha-total-liquido td {
  border-top: 2px solid #000;
  font-size: 16px;
}
.rodape {
  margin-top: 20px;
  font-size: 12px;
}
</style>
</head>
<body>
<div class="container">
<h1>Holerite Automático</h1>

<label>Salário mensal (R$):</label>
<input id="salario" type="number" step="0.01">

<label>Horas trabalhadas por dia:</label>
<input id="horasDia" type="number" step="0.01">

<label>Dias úteis do mês:</label>
<input id="diasUteis" type="number">

<label>Código 011 - Dias trabalhados:</label>
<input id="diasTrabalhados" type="number">

<label>Código 049 - Dias de D.S.R:</label>
<input id="dsrDias" type="number">

<label>Código 050 - Horas Adicional Noturno 20%:</label>
<input id="horasNoturnas" type="number">

<label>Código 060 - Horas Extras 50%:</label>
<input id="horas50" type="number">

<label>Código 061 - Horas Extras 100%:</label>
<input id="horas100" type="number">

<label>Código 062 - Domingos/Feriados trabalhados:</label>
<input id="feriados" type="number">

<label>Usa Vale-Transporte?</label>
<select id="usaVT">
  <option value="n">Não</option>
  <option value="s">Sim</option>
</select>

<div id="vtCampos" style="display:none;">
  <label>Código 100 - Dias com Vale-Transporte:</label>
  <input id="diasVT" type="number">
  <label>Valor passagem IDA (R$):</label>
  <input id="valorIda" type="number" step="0.01">
  <label>Valor passagem VOLTA (R$):</label>
  <input id="valorVolta" type="number" step="0.01">
</div>

<button onclick="calcular()">Gerar Holerite</button>

<div id="resultado"></div>
</div>

<script>
document.getElementById('usaVT').addEventListener('change', function(){
  document.getElementById('vtCampos').style.display = this.value === 's' ? 'block' : 'none';
});

function formatarValor(v){
  return 'R$ ' + v.toFixed(2).replace('.', ',');
}

function calcular(){
  const salario = parseFloat(document.getElementById('salario').value) || 0;
  const horasDia = parseFloat(document.getElementById('horasDia').value) || 0;
  const diasUteis = parseFloat(document.getElementById('diasUteis').value) || 0;
  const diasTrabalhados = parseFloat(document.getElementById('diasTrabalhados').value) || 0;
  const dsrDias = parseFloat(document.getElementById('dsrDias').value) || 0;
  const horasNoturnas = parseFloat(document.getElementById('horasNoturnas').value) || 0;
  const horas50 = parseFloat(document.getElementById('horas50').value) || 0;
  const horas100 = parseFloat(document.getElementById('horas100').value) || 0;
  const feriados = parseFloat(document.getElementById('feriados').value) || 0;
  const usaVT = document.getElementById('usaVT').value === 's';
  const diasVT = parseFloat(document.getElementById('diasVT').value) || 0;
  const valorIda = parseFloat(document.getElementById('valorIda').value) || 0;
  const valorVolta = parseFloat(document.getElementById('valorVolta').value) || 0;

  const vdt = salario / 30;
  const vhn = horasDia ? vdt / horasDia : 0;

  const salarioBase = vdt * diasTrabalhados;
  const adicionalNoturno = vhn * 0.20 * horasNoturnas;
  const valorHE50 = vhn * 1.5 * horas50;
  const valorHE100 = vhn * 2.0 * horas100;
  const valorDomingo = 101.20 * feriados;

  const baseDSR = adicionalNoturno + valorHE50 + valorHE100 + valorDomingo;
  const dsrValor = diasUteis ? (baseDSR / diasUteis) * dsrDias : 0;

  const vtIndenizacao = usaVT ? diasVT * (valorIda + valorVolta) : 0;

  const baseINSS = salarioBase + adicionalNoturno + valorHE50 + valorHE100 + valorDomingo + dsrValor;

  const faixa1 = 1518.00, faixa2 = 2793.88, faixa3 = 4190.83;
  let descontoINSS = 0;
  if (baseINSS <= faixa1) descontoINSS = baseINSS * 0.075;
  else if (baseINSS <= faixa2) descontoINSS = (faixa1 * 0.075) + ((baseINSS - faixa1) * 0.09);
  else if (baseINSS <= faixa3) descontoINSS = (faixa1 * 0.075) + ((faixa2 - faixa1) * 0.09) + ((baseINSS - faixa2) * 0.12);
  else descontoINSS = (faixa1 * 0.075) + ((faixa2 - faixa1) * 0.09) + ((faixa3 - faixa2) * 0.12) + ((baseINSS - faixa3) * 0.14);
  const aliqMedia = baseINSS ? (descontoINSS / baseINSS * 100) : 0;

  const descontoVT = usaVT ? salario * 0.06 : 0;
  const fgts = baseINSS * 0.08;

  const lancamentos = [
    {cod:"011", desc:"Salário Base", ref:diasTrabalhados+" dias", val:salarioBase},
    {cod:"049", desc:"Descanso Semanal Remunerado", ref:dsrDias+" dias", val:dsrValor},
    {cod:"050", desc:"Adicional Noturno 20%", ref:horasNoturnas+" h", val:adicionalNoturno},
    {cod:"060", desc:"Hora Extra 50%", ref:horas50+" h", val:valorHE50},
    {cod:"061", desc:"Hora Extra 100%", ref:horas100+" h", val:valorHE100},
    {cod:"062", desc:"Domingo/Feriado", ref:feriados+" dia(s)", val:valorDomingo}
  ];
  if (vtIndenizacao>0) lancamentos.push({cod:"100", desc:"Indenização Vale-Transporte", ref:diasVT+" dias", val:vtIndenizacao});
  lancamentos.push({cod:"310", desc:"INSS", ref:aliqMedia.toFixed(2)+"%", val:-descontoINSS});
  if (usaVT) lancamentos.push({cod:"320", desc:"Desconto Vale-Transporte 6%", ref:"6%", val:-descontoVT});

  const totalProventos = lancamentos.filter(l=>l.val>0).reduce((a,b)=>a+b.val,0);
  const totalDescontos = lancamentos.filter(l=>l.val<0).reduce((a,b)=>a+b.val,0)*-1;
  const totalLiquido = totalProventos - totalDescontos;

  let linhas = '';
  lancamentos.forEach(l=>{
    const classe = l.val<0 ? 'desconto' : 'provento';
    const sinal = l.val<0 ? '-' : '';
    linhas += `<tr><td>${l.cod} - ${l.desc}</td><td>${l.ref}</td><td class="${classe}">${sinal} ${formatarValor(Math.abs(l.val))}</td></tr>`;
  });

  const html = `
  <table>
    <thead>
      <tr><th>Descrição</th><th>Referência</th><th>Valor</th></tr>
    </thead>
    <tbody>
      ${linhas}
      <tr class="totais"><td colspan="2">Total de Proventos</td><td class="provento">${formatarValor(totalProventos)}</td></tr>
      <tr class="totais"><td colspan="2">Total de Descontos</td><td class="desconto">${formatarValor(totalDescontos)}</td></tr>
      <tr class="linha-total-liquido"><td colspan="2">Total Líquido a Receber</td><td class="provento">${formatarValor(totalLiquido)}</td></tr>
    </tbody>
  </table>
  <p class="rodape">Base FGTS: ${formatarValor(baseINSS)} | FGTS (8%): ${formatarValor(fgts)}</p>
  `;

  document.getElementById('resultado').innerHTML = html;
}
</script>
</body>
</html>
